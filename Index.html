<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo - Reproductor con Tabs</title>
  <style>
    :root{
      --bg:#0f1720; --card:#0b1220; --muted:#9aa4b2; --accent:#06b6d4;
      --radius:10px; --gap:12px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:linear-gradient(180deg,#071124 0%, #0b1220 100%);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
    .container{width:100%;max-width:980px}

    header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    header h1{font-size:20px;margin:0}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:16px;border-radius:var(--radius);box-shadow:0 6px 18px rgba(2,6,23,0.6)}

    .tabs{display:flex;gap:8px;margin-bottom:12px}
    .tab{padding:8px 12px;border-radius:8px;background:transparent;border:1px solid transparent;color:var(--muted);cursor:pointer}
    .tab.active{background:rgba(6,182,212,0.08);border-color:rgba(6,182,212,0.18);color:var(--accent)}

    .layout{display:grid;grid-template-columns:1fr 320px;gap:16px}
    @media (max-width:880px){.layout{grid-template-columns:1fr}}

    .player-wrap{min-height:260px}
    video{width:100%;height:auto;border-radius:8px;background:#000;display:block}

    .controls{display:flex;gap:8px;align-items:center;margin-top:8px}
    .btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer}
    .btn.primary{background:var(--accent);color:#032026;border:none}

    .sidebar{display:flex;flex-direction:column;gap:12px}
    .info{font-size:14px;color:var(--muted)}

    .playlist{display:flex;flex-direction:column;gap:8px;max-height:360px;overflow:auto;padding-right:6px}
    .episode{padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);cursor:pointer;border:1px solid transparent}
    .episode:hover{border-color:rgba(255,255,255,0.03)}
    .episode.active{background:rgba(6,182,212,0.06);border-color:rgba(6,182,212,0.12)}

    .meta{font-size:13px;color:var(--muted)}

    footer{margin-top:16px;text-align:center;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div style="width:44px;height:44px;border-radius:8px;background:linear-gradient(180deg,#08303a,#032026);display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:700">VP</div>
      <div>
        <h1>Demo: Reproductor con Tabs</h1>
        <div class="meta">Proyecto de ejemplo para GitHub Pages</div>
      </div>
    </header>

    <div class="card">
      <div class="tabs" role="tablist">
        <button class="tab active" data-tab="player" role="tab">Reproductor</button>
        <button class="tab" data-tab="info" role="tab">Información</button>
        <button class="tab" data-tab="playlist" role="tab">Lista</button>
      </div>

      <div class="layout">
        <main>
          <section id="player" class="region">
            <div class="player-wrap">
              <video id="video" controls preload="metadata" poster="">
                <!-- Fuente por defecto (demo pública) -->
                <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4">
                Tu navegador no soporta video HTML5.
              </video>
            </div>

            <div class="controls">
              <button id="playPause" class="btn">Play / Pause</button>
              <button id="restart" class="btn">Reiniciar</button>
              <select id="quality" class="btn">
                <option value="orig">Calidad original</option>
                <!-- Estas opciones cambian el src del video: demo concept - en producción montar varias resoluciones en R2/Stream -->
                <option value="720">720p (demo)</option>
                <option value="360">360p (demo)</option>
              </select>
              <a id="downloadBtn" class="btn" href="#" download>Descargar</a>
            </div>
          </section>

          <section id="info" class="region" style="display:none;margin-top:12px">
            <h3>Descripción</h3>
            <p class="info">Esta es una demo de reproductor HTML5 con pestañas y lista de reproducción. Para usar tus propios vídeos sube los archivos a tu repo o —mejor— a Cloudflare R2/Stream y cambia las URLs en la lista de episodios.</p>
            <p class="info">Consejo: para vídeos pesados usa Cloudflare R2 o Stream y no el repositorio de GitHub (límites de tamaño y rendimiento).</p>
          </section>

          <section id="playlist-region" class="region" style="display:none;margin-top:12px">
            <h3>Lista de reproducción</h3>
            <div class="playlist" id="playlist"></div>
          </section>
        </main>

        <aside class="sidebar">
          <div class="info card" style="padding:12px;border-radius:8px;background:rgba(255,255,255,0.01);">
            <strong>Detalles del vídeo</strong>
            <div id="videoTitle" style="margin-top:8px">Flower (demo)</div>
            <div class="meta" id="videoMeta">Fuente pública - MDN</div>
          </div>

          <div class="card" style="padding:12px;border-radius:8px;background:rgba(255,255,255,0.01);">
            <strong>Instrucciones rápidas</strong>
            <ol class="meta" style="padding-left:16px;margin:8px 0">
              <li>Agrega tus archivos en la carpeta <code>videos/</code> del repo</li>
              <li>Actualiza las URLs en la lista de reproducción (abajo)</li>
              <li>Haz push y GitHub Pages servirá el sitio como estático</li>
            </ol>
          </div>
        </aside>
      </div>

      <footer>Demo lista para copiar como <code>index.html</code> y subir a GitHub</footer>
    </div>
  </div>

<script>
  // --- Datos de ejemplo: lista de episodios ---
  const episodes = [
    { id:1, title:'Flower (demo)', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4', quality:{'orig':'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4','720':'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4','360':'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'}, duration:'00:06' },
    { id:2, title:'Sample 2 (demo)', src:'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4', quality:{'orig':'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4','720':'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4','360':'https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4'}, duration:'00:06' }
  ];

  // Elementos
  const tabs = document.querySelectorAll('.tab');
  const regions = document.querySelectorAll('.region');
  const video = document.getElementById('video');
  const playPause = document.getElementById('playPause');
  const restart = document.getElementById('restart');
  const quality = document.getElementById('quality');
  const downloadBtn = document.getElementById('downloadBtn');
  const playlistEl = document.getElementById('playlist');
  const videoTitle = document.getElementById('videoTitle');
  const videoMeta = document.getElementById('videoMeta');

  // Tabs
  tabs.forEach(t => t.addEventListener('click', ()=>{
    tabs.forEach(x=>x.classList.remove('active'));
    t.classList.add('active');
    const target = t.getAttribute('data-tab');
    regions.forEach(r=>{
      if(r.id === target) r.style.display = '';
      else r.style.display = 'none';
    });
  }));

  // Playlist render
  function renderPlaylist(){
    playlistEl.innerHTML = '';
    episodes.forEach((ep, i)=>{
      const div = document.createElement('div');
      div.className = 'episode';
      div.dataset.index = i;
      div.innerHTML = `<strong>${ep.title}</strong><div class="meta">Duración: ${ep.duration}</div>`;
      div.addEventListener('click', ()=> loadEpisode(i));
      playlistEl.appendChild(div);
    });
    // activar primero
    setActiveEpisode(0);
  }

  function setActiveEpisode(index){
    document.querySelectorAll('.episode').forEach((el, i)=>{
      el.classList.toggle('active', i===index);
    });
  }

  function loadEpisode(index){
    const ep = episodes[index];
    // set source
    video.pause();
    // remove existing sources
    while(video.firstChild) video.removeChild(video.firstChild);
    const source = document.createElement('source');
    source.src = ep.src;
    source.type = 'video/mp4';
    video.appendChild(source);
    video.load();
    video.play();
    videoTitle.textContent = ep.title;
    videoMeta.textContent = 'Episodio ' + ep.id;
    downloadBtn.href = ep.src;
    setActiveEpisode(index);
  }

  // Controls
  playPause.addEventListener('click', ()=>{ if(video.paused) video.play(); else video.pause(); });
  restart.addEventListener('click', ()=>{ video.currentTime = 0; video.play(); });

  quality.addEventListener('change', ()=>{
    const q = quality.value;
    // intenta cambiar por la url de la calidad si existe
    const cur = episodes.findIndex(e=> e.src === video.querySelector('source')?.src || e.src === video.currentSrc);
    const ep = episodes[cur>=0?cur:0];
    const newSrc = (ep && ep.quality && ep.quality[q]) ? ep.quality[q] : ep.src;
    const curTime = video.currentTime;
    video.pause();
    while(video.firstChild) video.removeChild(video.firstChild);
    const src = document.createElement('source'); src.src = newSrc; src.type = 'video/mp4'; video.appendChild(src);
    video.load();
    video.currentTime = curTime;
    video.play();
    downloadBtn.href = newSrc;
  });

  // Inicializar
  renderPlaylist();
  // load primer cap
  loadEpisode(0);
</script>
</body>
</html>
